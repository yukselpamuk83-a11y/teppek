import{c as e,t as s,a,r as t,j as r,S as l,b as n,O as i,P as o,C as c,d,X as u,T as m,D as x,R as h,e as g,s as p,L as b,U as f,f as y,g as v,B as j,M as N,h as w,i as k,k as C,l as S,m as z,H as T,n as _,o as I,p as L,q as A,u as O,v as M,I as E,w as P,x as $,y as B,z as F,A as D,E as G,F as R,G as W,J as q}from"./vendor-Dw7vXVSh.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();let U=0;const V=e((e,s)=>({toasts:[],addToast:s=>{const a=++U,t={id:a,type:"info",duration:5e3,...s};return e(e=>({toasts:[...e.toasts,t]})),a},removeToast:s=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},clearToasts:()=>{e({toasts:[]})},success:(e,a={})=>s().addToast({type:"success",message:e,title:"Başarılı!",...a}),error:(e,a={})=>s().addToast({type:"error",message:e,title:"Hata!",duration:7e3,...a}),warning:(e,a={})=>s().addToast({type:"warning",message:e,title:"Uyarı!",...a}),info:(e,a={})=>s().addToast({type:"info",message:e,...a})}));function H(...e){return s(a(e))}const Y={success:(e,s)=>V.getState().success(e,s),error:(e,s)=>V.getState().error(e,s),warning:(e,s)=>V.getState().warning(e,s),info:(e,s)=>V.getState().info(e,s)},K=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),J=e=>e.length>=6,Z=e=>e&&e.toString().trim().length>0,X=n("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",teppek:"bg-blue-600 text-white shadow hover:bg-blue-700",success:"bg-green-600 text-white shadow hover:bg-green-700",warning:"bg-yellow-600 text-white shadow hover:bg-yellow-700"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-md px-10 text-base",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Q=t.forwardRef(({className:e,variant:s,size:a,asChild:t=!1,...n},i)=>{const o=t?l:"button";return r.jsx(o,{className:H(X({variant:s,size:a,className:e})),ref:i,...n})});Q.displayName="Button";const ee=h,se=o,ae=t.forwardRef(({className:e,...s},a)=>r.jsx(i,{ref:a,className:H("fixed inset-0 z-[9999] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));ae.displayName=i.displayName;const te=t.forwardRef(({className:e,children:s,...a},t)=>r.jsxs(se,{children:[r.jsx(ae,{}),r.jsxs(c,{ref:t,className:H("fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4","border bg-white p-6 shadow-lg duration-200","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","sm:rounded-lg",e),...a,children:[s,r.jsxs(d,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));te.displayName=c.displayName;const re=({className:e,...s})=>r.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});re.displayName="DialogHeader";const le=t.forwardRef(({className:e,...s},a)=>r.jsx(m,{ref:a,className:H("text-lg font-semibold leading-none tracking-tight",e),...s}));le.displayName=m.displayName;t.forwardRef(({className:e,...s},a)=>r.jsx(x,{ref:a,className:H("text-sm text-muted-foreground",e),...s})).displayName=x.displayName;const ne=t.forwardRef(({className:e,type:s,...a},t)=>r.jsx("input",{type:s,className:H("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));ne.displayName="Input";const ie=g("https://fcsggaggjtxqwatimplk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjc2dnYWdnanR4cXdhdGltcGxrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3OTg2MzAsImV4cCI6MjA3MTM3NDYzMH0.VKTZTVSqBvzVrP8pabPqFfAetfMjZSj45YwkXPOM9Bg",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"geoo_dev_test"}}),oe=async(e,s,a={})=>await ie.auth.signUp({email:e,password:s,options:{data:a}}),ce=async(e,s)=>await ie.auth.signInWithPassword({email:e,password:s}),de=async()=>await ie.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}}),ue=async()=>await ie.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"email"}}),me=async()=>await ie.auth.signInWithOAuth({provider:"twitter",options:{redirectTo:`${window.location.origin}/auth/callback`}}),xe=async()=>await ie.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"user:email"}}),he=async()=>await ie.auth.signInWithOAuth({provider:"linkedin_oidc",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"openid profile email"}}),ge=async()=>await ie.auth.signInWithOAuth({provider:"discord",options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:"identify email"}}),pe=async()=>await ie.auth.signOut(),be=async()=>{const{data:{user:e},error:s}=await ie.auth.getUser();return{user:e,error:s}},fe=e=>ie.auth.onAuthStateChange(e),ye=e(p((e,s)=>({user:null,session:null,loading:!0,error:null,signUp:async(s,a,t)=>{e({loading:!0,error:null});try{const{data:r,error:l}=await oe(s,a,t);if(l)throw l;return e({user:r.user,session:r.session,loading:!1}),{success:!0,data:r}}catch(r){return e({error:r.message,loading:!1}),{success:!1,error:r}}},signIn:async(s,a)=>{e({loading:!0,error:null});try{const{data:t,error:r}=await ce(s,a);if(r)throw r;return e({user:t.user,session:t.session,loading:!1}),{success:!0,data:t}}catch(t){return e({error:t.message,loading:!1}),{success:!1,error:t}}},signInWithGoogle:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await de();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signInWithFacebook:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await ue();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signInWithLinkedIn:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await he();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signInWithTwitter:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await me();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signInWithGitHub:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await xe();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signInWithDiscord:async()=>{e({loading:!0,error:null});try{const{data:s,error:a}=await ge();if(a)throw a;return e({loading:!1}),{success:!0,data:s}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},signOut:async()=>{e({loading:!0});try{return await pe(),e({user:null,session:null,loading:!1,error:null}),{success:!0}}catch(s){return e({error:s.message,loading:!1}),{success:!1,error:s}}},initializeAuth:async()=>{var s,a;try{const{user:t,error:r}=await be();r&&((null==(s=r.message)?void 0:s.includes("Auth session missing"))||null==(a=r.message)||a.includes("Invalid JWT")),e({user:t||null,loading:!1,error:null}),fe((s,a)=>{e({user:(null==a?void 0:a.user)??null,session:a,loading:!1})})}catch(t){e({user:null,session:null,loading:!1,error:null})}},clearError:()=>e({error:null}),isAuthenticated:()=>!!s().user,isLoading:()=>s().loading,getUser:()=>s().user,getSession:()=>s().session,getError:()=>s().error})));function ve({isOpen:e,onClose:s,defaultMode:a="signin"}){const[l,n]=t.useState(a),[i,o]=t.useState({email:"",password:"",firstName:"",lastName:"",userType:"user"}),[c,d]=t.useState({}),{signIn:u,signUp:m,signInWithGoogle:x,signInWithFacebook:h,signInWithLinkedIn:g,signInWithTwitter:p,signInWithGitHub:k,loading:C}=ye(),S=async e=>{var s,a;try{let a;switch(e){case"google":a=await x();break;case"facebook":a=await h();break;case"linkedin":a=await g();break;case"twitter":a=await p();break;case"github":a=await k();break;default:throw new Error("Desteklenmeyen sosyal medya platformu")}a.success?Y.success(`${e} ile giriş başlatıldı!`):Y.error((null==(s=a.error)?void 0:s.message)||"Sosyal medya girişi başarısız")}catch(t){(null==(a=t.message)?void 0:a.includes("provider is not enabled"))?Y.error(`${e} girişi henüz aktif değil. Lütfen e-posta ile giriş yapın.`):Y.error("Sosyal medya girişi sırasında hata oluştu")}};return r.jsx(ee,{open:e,onOpenChange:s,children:r.jsxs(te,{className:"sm:max-w-md modal-content",children:[r.jsx(re,{children:r.jsx(le,{className:"flex items-center gap-2 text-gray-900",children:"signin"===l?r.jsxs(r.Fragment,{children:[r.jsx(b,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-900",children:"Teppek'e Giriş Yap"})]}):r.jsxs(r.Fragment,{children:[r.jsx(f,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{className:"text-gray-900",children:"Teppek'e Kayıt Ol"})]})})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>S("google"),disabled:C,className:"flex items-center justify-center gap-2 hover:bg-red-50 hover:border-red-200 text-gray-900",children:[r.jsx(y,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"hidden sm:inline text-gray-900",children:"Google"})]}),r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>S("facebook"),disabled:C,className:"flex items-center justify-center gap-2 hover:bg-blue-50 hover:border-blue-200 text-gray-900",children:[r.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded text-white flex items-center justify-center text-xs font-bold",children:"f"}),r.jsx("span",{className:"hidden sm:inline text-gray-900",children:"Facebook"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>S("linkedin"),disabled:C,className:"flex items-center justify-center gap-2 hover:bg-blue-50 hover:border-blue-300 text-xs text-gray-900",children:[r.jsx("div",{className:"w-4 h-4 bg-blue-700 rounded text-white flex items-center justify-center text-xs font-bold",children:"in"}),r.jsx("span",{className:"hidden sm:inline text-gray-900",children:"LinkedIn"})]}),r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>S("twitter"),disabled:C,className:"flex items-center justify-center gap-2 hover:bg-sky-50 hover:border-sky-200 text-xs text-gray-900",children:[r.jsx("div",{className:"w-4 h-4 bg-sky-500 rounded-full text-white flex items-center justify-center text-xs font-bold",children:"𝕏"}),r.jsx("span",{className:"hidden sm:inline text-gray-900",children:"Twitter"})]}),r.jsxs(Q,{type:"button",variant:"outline",onClick:()=>S("github"),disabled:C,className:"flex items-center justify-center gap-2 hover:bg-gray-50 hover:border-gray-300 text-xs text-gray-900",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-800 rounded-full text-white flex items-center justify-center text-xs font-bold",children:"⚡"}),r.jsx("span",{className:"hidden sm:inline text-gray-900",children:"GitHub"})]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-600 font-medium",children:"veya e-posta ile"})})]}),r.jsxs("form",{onSubmit:async e=>{var a;if(e.preventDefault(),(()=>{const e={};return K(i.email)||(e.email="Geçerli bir e-posta adresi giriniz"),J(i.password)||(e.password="Şifre en az 6 karakter olmalıdır"),"signup"===l&&(Z(i.firstName)||(e.firstName="Ad alanı gereklidir"),Z(i.lastName)||(e.lastName="Soyad alanı gereklidir")),d(e),0===Object.keys(e).length})())try{let e;e="signin"===l?await u(i.email,i.password):await m(i.email,i.password,{first_name:i.firstName,last_name:i.lastName,user_type:i.userType}),e.success?(Y.success("signin"===l?"Giriş başarılı!":"Kayıt başarılı!"),s(),o({email:"",password:"",firstName:"",lastName:"",userType:"user"})):Y.error((null==(a=e.error)?void 0:a.message)||"İşlem başarısız")}catch(t){Y.error("Beklenmeyen bir hata oluştu")}},className:"space-y-4",children:["signup"===l&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Q,{type:"button",variant:"user"===i.userType?"teppek":"outline",size:"sm",className:"flex-1 "+("user"!==i.userType?"text-gray-900":""),onClick:()=>o(e=>({...e,userType:"user"})),children:[r.jsx(v,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"İş Arayan"})]}),r.jsxs(Q,{type:"button",variant:"company"===i.userType?"teppek":"outline",size:"sm",className:"flex-1 "+("company"!==i.userType?"text-gray-900":""),onClick:()=>o(e=>({...e,userType:"company"})),children:[r.jsx(j,{className:"h-4 w-4 mr-2"}),r.jsx("span",{children:"İşveren"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(ne,{placeholder:"Ad",value:i.firstName,onChange:e=>o(s=>({...s,firstName:e.target.value})),className:c.firstName?"border-red-500":""}),c.firstName&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.firstName})]}),r.jsxs("div",{children:[r.jsx(ne,{placeholder:"Soyad",value:i.lastName,onChange:e=>o(s=>({...s,lastName:e.target.value})),className:c.lastName?"border-red-500":""}),c.lastName&&r.jsx("p",{className:"text-xs text-red-500 mt-1",children:c.lastName})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ne,{type:"email",placeholder:"E-posta adresiniz",className:"pl-10 "+(c.email?"border-red-500":""),value:i.email,onChange:e=>o(s=>({...s,email:e.target.value}))})]}),c.email&&r.jsx("p",{className:"text-xs text-red-500",children:c.email})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ne,{type:"password",placeholder:"Şifreniz",className:"pl-10 "+(c.password?"border-red-500":""),value:i.password,onChange:e=>o(s=>({...s,password:e.target.value}))})]}),c.password&&r.jsx("p",{className:"text-xs text-red-500",children:c.password})]}),r.jsx(Q,{type:"submit",className:"w-full",variant:"teppek",disabled:C,children:C?"İşleniyor...":"signin"===l?"Giriş Yap":"Kayıt Ol"}),r.jsx("div",{className:"text-center",children:r.jsx(Q,{type:"button",variant:"link",onClick:()=>{n("signin"===l?"signup":"signin"),d({})},className:"text-sm text-gray-700 hover:text-gray-900",children:r.jsx("span",{className:"text-gray-700 hover:text-gray-900",children:"signin"===l?"Hesabınız yok mu? Kayıt olun":"Zaten hesabınız var mı? Giriş yapın"})})})]})]})})}ye.getState().initializeAuth();const je={track:(e,s={})=>{"undefined"!=typeof window&&window.va&&window.va("track",e,s)},events:{pageView:e=>{je.track("page_view",{page:e})},jobSearch:(e,s)=>{je.track("job_search",{query:e,filters:s})},jobClick:(e,s)=>{je.track("job_click",{job_id:e,source:s})},authAction:(e,s)=>{je.track("auth_action",{action:e,user_type:s})},mapInteraction:(e,s)=>{je.track("map_interaction",{action:e,location:s})},filterUsage:(e,s)=>{je.track("filter_usage",{filter_type:e,value:s})}}},Ne=()=>{if("undefined"!=typeof window){const e=performance.now();return()=>{const s=performance.now()-e;je.track("page_load_time",{load_time:Math.round(s),page:window.location.pathname})}}},we=e=>{const s=performance.now();return a=>{const t=performance.now()-s;je.track("data_load_time",{data_type:e,load_time:Math.round(t),item_count:a})}};function ke(){var e;const[s,a]=t.useState({isOpen:!1,mode:"signin"}),{user:l,signOut:n,isAuthenticated:i}=ye(),o=e=>{a({isOpen:!0,mode:e}),je.events.authAction("modal_open",e)};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between shadow-sm z-[1000] sticky top-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),r.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Teppek Dev"})]}),r.jsx("div",{className:"hidden sm:block",children:r.jsx("span",{className:"text-sm text-gray-500 bg-yellow-100 px-2 py-1 rounded-full",children:"🧪 Deneysel Versiyon"})})]}),r.jsx("div",{className:"flex items-center space-x-3",children:i()?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-sm text-gray-600 hidden sm:block",children:["Merhaba, ",(null==(e=null==l?void 0:l.user_metadata)?void 0:e.first_name)||"Kullanıcı","!"]}),r.jsxs(Q,{variant:"ghost",size:"sm",children:[r.jsx(k,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Ayarlar"})]}),r.jsxs(Q,{variant:"ghost",size:"sm",children:[r.jsx(C,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"İstatistikler"})]}),r.jsxs(Q,{variant:"outline",size:"sm",onClick:async()=>{var e;await n(),je.events.authAction("sign_out",null==(e=null==l?void 0:l.user_metadata)?void 0:e.user_type)},children:[r.jsx(S,{className:"h-4 w-4 mr-2"}),"Çıkış"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>o("signin"),className:"hidden sm:flex",children:[r.jsx(b,{className:"h-4 w-4 mr-2"}),"Giriş Yap"]}),r.jsxs(Q,{variant:"teppek",size:"sm",onClick:()=>o("signup"),className:"shadow-lg hover:shadow-xl transition-shadow",children:[r.jsx(f,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Kayıt Ol"}),r.jsx("span",{className:"sm:hidden",children:"Kayıt"})]})]})})]}),r.jsx(ve,{isOpen:s.isOpen,onClose:()=>a({isOpen:!1,mode:"signin"}),defaultMode:s.mode})]})}function Ce(){var e,s,a,l;const{user:n}=ye(),[i,o]=t.useState(!1),[c,d]=t.useState({savedJobs:12,applications:8,profileViews:45,lastLogin:new Date}),[m,x]=t.useState({firstName:(null==(e=null==n?void 0:n.user_metadata)?void 0:e.first_name)||"",lastName:(null==(s=null==n?void 0:n.user_metadata)?void 0:s.last_name)||"",email:(null==n?void 0:n.email)||"",phone:"",location:"",bio:"",skills:""});t.useEffect(()=>{n&&je.events.pageView("dashboard")},[n]);if(!n)return r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Dashboard'a erişim için giriş yapın"}),r.jsx("p",{className:"text-gray-500",children:"İş başvurularınızı, kayıtlı ilanlarınızı ve profilinizi yönetebilirsiniz."})]})});const h="company"===((null==(a=n.user_metadata)?void 0:a.user_type)||"user");return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Hoş geldin, ",(null==(l=n.user_metadata)?void 0:l.first_name)||"Kullanıcı","! 👋"]}),r.jsxs("p",{className:"opacity-90",children:[h?"İşveren Paneli":"İş Arayan Paneli"," - Son giriş: ",c.lastLogin.toLocaleDateString("tr-TR")]})]}),r.jsxs(Q,{variant:"secondary",onClick:()=>o(!0),className:"bg-white/20 hover:bg-white/30 text-white border-white/20",children:[r.jsx(z,{className:"h-4 w-4 mr-2"}),"Profili Düzenle"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:r.jsx(T,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.savedJobs}),r.jsx("p",{className:"text-gray-600",children:"Kayıtlı İlan"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:r.jsx(_,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.applications}),r.jsx("p",{className:"text-gray-600",children:"Başvuru"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:r.jsx(I,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:c.profileViews}),r.jsx("p",{className:"text-gray-600",children:"Profil Görüntüleme"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:r.jsx(L,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"24"}),r.jsx("p",{className:"text-gray-600",children:"Günlük Aktivite"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Hızlı İşlemler"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Q,{variant:"outline",className:"justify-start h-auto p-4",children:[r.jsx(A,{className:"h-5 w-5 mr-3 text-blue-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"Konum Güncelle"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Yakınımdaki işleri göster"})]})]}),r.jsxs(Q,{variant:"outline",className:"justify-start h-auto p-4",children:[r.jsx(_,{className:"h-5 w-5 mr-3 text-green-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:h?"İlan Yayınla":"CV Güncelle"}),r.jsx("div",{className:"text-sm text-gray-500",children:h?"Yeni pozisyon ekle":"Profilini güncel tut"})]})]}),r.jsxs(Q,{variant:"outline",className:"justify-start h-auto p-4",children:[r.jsx(I,{className:"h-5 w-5 mr-3 text-purple-600"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:"İstatistikler"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Detaylı analiz görüntüle"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Son Aktiviteler"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[r.jsx(_,{className:"h-5 w-5 text-blue-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Frontend Developer pozisyonuna başvurdun"}),r.jsx("p",{className:"text-sm text-gray-500",children:"2 saat önce"})]})]}),r.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[r.jsx(T,{className:"h-5 w-5 text-green-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"3 yeni iş ilanını kaydettin"}),r.jsx("p",{className:"text-sm text-gray-500",children:"1 gün önce"})]})]}),r.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg",children:[r.jsx(v,{className:"h-5 w-5 text-purple-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Profil fotoğrafını güncelledin"}),r.jsx("p",{className:"text-sm text-gray-500",children:"3 gün önce"})]})]})]})]})]}),r.jsx(ee,{open:i,onOpenChange:o,children:r.jsxs(te,{className:"sm:max-w-md",children:[r.jsx(re,{children:r.jsx(le,{children:"Profil Bilgilerini Düzenle"})}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),je.track("profile_update",{user_id:null==n?void 0:n.id,fields_updated:Object.keys(m)}),o(!1)},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Ad"}),r.jsx(ne,{value:m.firstName,onChange:e=>x(s=>({...s,firstName:e.target.value})),placeholder:"Adınız"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Soyad"}),r.jsx(ne,{value:m.lastName,onChange:e=>x(s=>({...s,lastName:e.target.value})),placeholder:"Soyadınız"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium flex items-center",children:[r.jsx(N,{className:"h-4 w-4 mr-2"}),"E-posta"]}),r.jsx(ne,{type:"email",value:m.email,onChange:e=>x(s=>({...s,email:e.target.value})),placeholder:"E-posta adresiniz"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium flex items-center",children:[r.jsx(O,{className:"h-4 w-4 mr-2"}),"Telefon"]}),r.jsx(ne,{value:m.phone,onChange:e=>x(s=>({...s,phone:e.target.value})),placeholder:"Telefon numaranız"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium flex items-center",children:[r.jsx(A,{className:"h-4 w-4 mr-2"}),"Konum"]}),r.jsx(ne,{value:m.location,onChange:e=>x(s=>({...s,location:e.target.value})),placeholder:"Şehir, Ülke"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(Q,{type:"submit",variant:"teppek",className:"flex-1",children:[r.jsx(M,{className:"h-4 w-4 mr-2"}),"Kaydet"]}),r.jsx(Q,{type:"button",variant:"outline",onClick:()=>o(!1),children:r.jsx(u,{className:"h-4 w-4"})})]})]})]})})]})}function Se(){const[e,s]=t.useState(!0),[a,l]=t.useState(null),{initializeAuth:n}=ye();return t.useEffect(()=>{(async()=>{var e;try{const{data:s,error:a}=await ie.auth.getSession();if(a)throw a;if(s.session)je.events.authAction("social_login_success",null==(e=s.session.user.app_metadata)?void 0:e.provider),await n(),setTimeout(()=>{window.location.href="/"},2e3);else{const{data:e,error:s}=await ie.auth.exchangeCodeForSession(window.location.search);if(s)throw s;if(!e.session)throw new Error("Unable to establish session");await n(),setTimeout(()=>{window.location.href="/"},2e3)}}catch(a){je.track("auth_callback_error",{error:a.message}),l(a.message),setTimeout(()=>{window.location.href="/?auth_error=true"},3e3)}finally{s(!1)}})()},[n]),e?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Giriş İşleminiz Tamamlanıyor..."}),r.jsx("p",{className:"text-gray-600",children:"Lütfen bekleyin, kısa sürede yönlendirileceksiniz."})]})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"text-red-600 text-5xl mb-4",children:"⚠️"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Giriş İşleminde Sorun Oluştu"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Invalid JWT"===a||a.includes("session")?"Giriş oturumunuz geçersiz. Lütfen tekrar deneyin.":`Hata: ${a}`}),r.jsx("p",{className:"text-sm text-gray-500",children:"3 saniye içinde ana sayfaya yönlendirileceksiniz..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-green-600 text-5xl mb-4",children:"✅"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Giriş İşlemi Tamamlandı!"}),r.jsx("p",{className:"text-gray-600",children:"Ana sayfaya yönlendiriliyorsunuz..."})]})})}const ze={success:{icon:B,className:"bg-green-50 border-green-200 text-green-800",iconClassName:"text-green-600"},error:{icon:$,className:"bg-red-50 border-red-200 text-red-800",iconClassName:"text-red-600"},warning:{icon:P,className:"bg-yellow-50 border-yellow-200 text-yellow-800",iconClassName:"text-yellow-600"},info:{icon:E,className:"bg-blue-50 border-blue-200 text-blue-800",iconClassName:"text-blue-600"}};function Te({toast:e,onClose:s}){const[a,l]=t.useState(!1),[n,i]=t.useState(!1),o=ze[e.type]||ze.info,c=o.icon;t.useEffect(()=>{const e=setTimeout(()=>l(!0),100);return()=>clearTimeout(e)},[]),t.useEffect(()=>{if(e.duration&&e.duration>0){const s=setTimeout(()=>{d()},e.duration);return()=>clearTimeout(s)}},[e.duration]);const d=()=>{i(!0),setTimeout(()=>{s(e.id)},300)};return r.jsxs("div",{className:H("flex items-start gap-3 p-4 rounded-lg border shadow-lg transition-all duration-300 max-w-md",o.className,a&&!n?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:[r.jsx(c,{className:H("h-5 w-5 flex-shrink-0 mt-0.5",o.iconClassName)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[e.title&&r.jsx("h4",{className:"text-sm font-medium mb-1",children:e.title}),r.jsx("p",{className:"text-sm",children:e.message})]}),r.jsx("button",{onClick:d,className:H("flex-shrink-0 rounded-md p-1 hover:bg-black/10 transition-colors",o.iconClassName),children:r.jsx(u,{className:"h-4 w-4"})})]})}function _e({toasts:e,removeToast:s}){return r.jsx("div",{className:"fixed top-4 right-4 z-[20000] space-y-2",children:e.map(e=>r.jsx(Te,{toast:e,onClose:s},e.id))})}const Ie=e=>{window.history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("popstate"))},Le=()=>{const e=(()=>{const e=window.location.pathname;return{path:e,hash:window.location.hash,isAuthCallback:"/auth/callback"===e||e.includes("/auth/callback"),isProfile:"/profile"===e||e.includes("/profile"),isHome:"/"===e||""===e}})();return{currentRoute:e,navigateTo:Ie,isAuthCallback:e.isAuthCallback,isProfile:e.isProfile,isHome:e.isHome}};let Ae;function Oe({data:e,selectedLocation:s,isSubscribed:a,userLocation:l,onPremiumClick:n}){const i=t.useRef(null),o=t.useRef(null),c=t.useRef(null),d=t.useRef(null),u=t.useRef(null),[m,x]=t.useState(null),h={street:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},satellite:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri"}},g=t.useCallback(((e,s)=>{let a;return(...t)=>{clearTimeout(a),a=setTimeout(()=>e.apply(null,t),s)}})(e=>{o.current&&m&&o.current.removeLayer(m);const s=Ae.tileLayer(h[e].url,{attribution:h[e].attribution,noWrap:!0}).addTo(o.current);x(s)},150),[m]);t.useEffect(()=>{(async()=>{if(await(async()=>{var e;if("undefined"!=typeof window){if(["https://unpkg.com/leaflet@1.9.4/dist/leaflet.css","https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css","https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"].forEach(e=>{try{if(!document.querySelector(`link[href="${e}"]`)){const s=document.createElement("link");s.rel="stylesheet",s.href=e,document.head&&document.head.appendChild(s)}}catch(s){}}),!window.L)try{await new Promise((e,s)=>{const a=document.createElement("script");a.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",a.onload=e,a.onerror=s,document.head?document.head.appendChild(a):s(new Error("Document head not available"))})}catch(s){return}if(!(null==(e=window.L)?void 0:e.markerClusterGroup))try{await new Promise((e,s)=>{const a=document.createElement("script");a.src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js",a.onload=e,a.onerror=s,document.head?document.head.appendChild(a):s(new Error("Document head not available"))})}catch(s){return}Ae=window.L,Ae.markerClusterGroup}})(),i.current&&!o.current&&Ae&&l){const a=(null==l?void 0:l.lat)||41.01,t=(null==l?void 0:l.lng)||28.97;try{o.current=Ae.map(i.current,{maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,minZoom:2,maxZoom:18}).setView([a,t],10);const s=Ae.tileLayer(h.street.url,{attribution:h.street.attribution,noWrap:!0,bounds:[[-90,-180],[90,180]]}).addTo(o.current);x(s),d.current=Ae.circle([a,t],{radius:5e4,color:"#3b82f6",fillColor:"#60a5fa",fillOpacity:.1,weight:1}).addTo(o.current),o.current&&o.current.fitBounds(d.current.getBounds()),c.current=Ae.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),o.current.addLayer(c.current),o.current.on("zoomend moveend",()=>{setTimeout(()=>{c.current&&c.current.refreshClusters()},100)});const r=()=>{setTimeout(()=>{o.current&&c.current&&(o.current.invalidateSize(),c.current.refreshClusters(),0===c.current.getLayers().length&&e&&e.length>0&&setTimeout(()=>window.dispatchEvent(new CustomEvent("force-marker-refresh")),200))},150)};return window.addEventListener("resize",r),setTimeout(()=>{o.current&&o.current.invalidateSize()},100),()=>{window.removeEventListener("resize",r)}}catch(s){i.current&&(i.current.innerHTML="")}}})()},[l]),t.useEffect(()=>{if(o.current&&l){const e=Ae.divIcon({html:'<i class="fa-solid fa-location-pin user-location-icon"></i>',className:"",iconSize:[32,32],iconAnchor:[16,32]});d.current&&d.current.setLatLng([(null==l?void 0:l.lat)||41.01,(null==l?void 0:l.lng)||28.97]),u.current?u.current.setLatLng([(null==l?void 0:l.lat)||41.01,(null==l?void 0:l.lng)||28.97]):u.current=Ae.marker([(null==l?void 0:l.lat)||41.01,(null==l?void 0:l.lng)||28.97],{icon:e,zIndexOffset:1e3}).addTo(o.current)}},[l]);const[p,b]=t.useState(0);return t.useEffect(()=>{const e=()=>b(e=>e+1);return window.addEventListener("force-marker-refresh",e),()=>window.removeEventListener("force-marker-refresh",e)},[]),t.useEffect(()=>{c.current&&e.length&&l&&(o.current&&(o.current.removeLayer(c.current),c.current=Ae.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),o.current.addLayer(c.current)),e.forEach((e,s)=>{var t,r;const l=e.canView||a||e.distance<=50,i="job"===e.type?"fa-briefcase":"fa-user",o="job"===e.type?"#0097A7":"#FB8C00",d=`<div class="marker-container ${e.isSponsored?"sponsored-marker":""}">\n                <div class="icon-wrapper" style="border-color: ${e.isSponsored?"#FBBF24":o};">\n                    ${e.isSponsored?'<i class="fa-solid fa-star absolute -top-2 -right-2 text-yellow-400 text-xl"></i>':""}\n                    <i class="fa-solid ${i}" style="color: ${o};"></i>\n                </div>\n                <div class="marker-label">${e.title}</div>\n            </div>`,u=Ae.divIcon({html:d,className:"",iconSize:[120,90],iconAnchor:[60,26]}),m=Ae.marker([e.location.lat,e.location.lng],{icon:u});let x;if(l){let s="";"cv"===e.type&&e.contact?s=`<div style="background-color: #fff7ed; padding: 12px; border-radius: 8px; margin-top: 12px;">\n                        <div style="font-weight: 600; color: #ea580c; margin-bottom: 6px;">İletişim Bilgileri</div>\n                        <div style="color: #ea580c; word-break: break-all; font-size: 14px;">${e.contact}</div>\n                    </div>`:"job"===e.type&&"manual"===e.source&&e.contact?s=`<div style="background-color: #f0f9ff; padding: 12px; border-radius: 8px; margin-top: 12px;">\n                        <div style="font-weight: 600; color: #1e40af; margin-bottom: 6px;">İletişim Bilgileri</div>\n                        <div style="color: #1e40af; word-break: break-all; font-size: 14px;">${e.contact}</div>\n                    </div>`:"job"===e.type&&e.applyUrl&&(s=`<a href="${e.applyUrl}" target="_blank" style="display: block; background-color: #2563eb; color: white; padding: 12px; text-align: center; border-radius: 8px; text-decoration: none; margin-top: 12px;">İlana Başvur</a>`),x=`<div class="custom-popup-container">\n                    <div style="font-size: 18px; font-weight: bold; color: #0097A7; margin-bottom: 8px;">${e.title}</div>\n                    ${"job"===e.type&&e.salary_min?`<div style="font-size: 15px; font-weight: bold; color: #059669; margin-bottom: 12px; padding: 8px; background-color: #f0fdf4; border-radius: 6px;">${e.currency||"USD"} ${(null==(t=e.salary_min)?void 0:t.toLocaleString())||"?"} - ${(null==(r=e.salary_max)?void 0:r.toLocaleString())||"?"}</div>`:""}\n                    <div style="font-size: 14px; color: #4b5563; margin-bottom: 12px;">\n                        <i class="fa-solid fa-building" style="margin-right: 8px;"></i>${e.company||"Şirket bilgisi yok"}\n                        <br><i class="fa-solid fa-location-dot" style="margin-right: 8px; margin-top: 4px;"></i>${e.address}\n                    </div>\n                    ${s}\n                </div>`}else x=`<div class="custom-popup-container text-center">\n                    <div class="font-bold text-lg text-ilan">${e.title}</div>\n                    <div class="text-base font-semibold text-gray-800">${e.company}</div>\n                    <p class="text-sm text-gray-600 my-2">Bu kayıt <b>50 km'lik ücretsiz alanınızın dışında</b> kaldığı için detayları gizlenmiştir.</p>\n                    <button id="subscribe-btn-${e.id}" class="w-full bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600">Abonelik Seçenekleri</button>\n                </div>`;m.bindPopup(x),l||m.on("popupopen",()=>{const s=document.getElementById(`subscribe-btn-${e.id}`);s&&(s.onclick=n)}),c.current.addLayer(m)}))},[e,a,p]),t.useEffect(()=>{s&&o.current&&o.current.setView([s.lat,s.lng],16)},[s]),r.jsxs("div",{className:"relative h-full w-full",children:[r.jsx("div",{ref:i,className:"h-full w-full",style:{zIndex:1}}),r.jsxs("div",{className:"absolute top-4 right-4 z-[1000] flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>o.current&&l&&o.current.setView([(null==l?void 0:l.lat)||41.01,(null==l?void 0:l.lng)||28.97],14),className:"bg-green-600 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:bg-green-700",children:"Konum"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg flex",children:[r.jsx("button",{onClick:()=>g("street"),className:"px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-l-lg",children:"Sokak"}),r.jsx("button",{onClick:()=>g("satellite"),className:"px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-r-lg border-l",children:"Uydu"})]})]})]})}function Me({onFilterChange:e,setCurrentPage:s,isSubscribed:a,onSubscribeToggle:l}){const[n,i]=t.useState(""),[o,c]=t.useState("all");return r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 flex-shrink-0",children:[r.jsx("button",{onClick:()=>{c("all"),e({type:"all",keyword:n})},className:"p-3 rounded-lg font-semibold text-sm "+("all"===o?"bg-gray-800 text-white":"bg-gray-200"),children:"Tümü"}),r.jsx("button",{onClick:()=>{c("job"),e({type:"job",keyword:n})},className:"p-3 rounded-lg font-semibold text-sm "+("job"===o?"bg-ilan text-white":"bg-gray-200"),children:"İş İlanları"}),r.jsx("button",{onClick:()=>{c("cv"),e({type:"cv",keyword:n})},className:"p-3 rounded-lg font-semibold text-sm "+("cv"===o?"bg-cv text-white":"bg-gray-200"),children:"Adaylar"})]}),r.jsxs("div",{className:"flex-grow flex gap-2",children:[r.jsxs("div",{className:"relative flex-grow",children:[r.jsx("input",{type:"text",placeholder:"Anahtar kelime ile ara...",value:n,onChange:e=>i(e.target.value),className:"w-full h-full p-3 pl-10 border rounded-lg"}),r.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),r.jsx("button",{onClick:()=>{e({type:o,keyword:n}),s(1)},className:"bg-blue-600 text-white font-semibold px-4 rounded-lg hover:bg-blue-700",children:"Filtrele"}),r.jsx("button",{onClick:()=>{i(""),c("all"),s(1),e({type:"all",keyword:"",restoreInitialData:!0})},className:"bg-gray-200 text-gray-700 font-semibold px-4 rounded-lg hover:bg-gray-300",children:"Temizle"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:l,className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Abone Olundu"})]})]})})}const Ee=(e,s,a,t)=>{if(!(e&&s&&a&&t))return 1/0;const r=(a-e)*Math.PI/180,l=(t-s)*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))};function Pe({job:e,isOpen:s,onClose:a}){const{user:l,isAuthenticated:n}=ye(),[i,o]=t.useState(1),[c,d]=t.useState(!1),[u,m]=t.useState({coverLetter:"",resume:null,experience:"",expectedSalary:"",availableFrom:"",motivation:"",portfolio:"",linkedIn:"",github:""}),x=(e,s)=>{m(a=>({...a,[e]:s}))},h=()=>{o(1),m({coverLetter:"",resume:null,experience:"",expectedSalary:"",availableFrom:"",motivation:"",portfolio:"",linkedIn:"",github:""}),a()};return e?r.jsx(ee,{open:s,onOpenChange:h,children:r.jsxs(te,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(re,{children:r.jsx(le,{className:"text-gray-900",children:1===i?"İş Başvurusu":"Başvuru Tamamlandı!"})}),1===i?r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"font-semibold text-blue-900 text-lg",children:e.title}),r.jsx("p",{className:"text-blue-700",children:e.company}),r.jsx("p",{className:"text-blue-600 text-sm",children:e.address}),e.salary_min&&e.salary_max&&r.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:["Maaş: ",e.salary_min," - ",e.salary_max," ",e.currency||"TRY"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Başvuru Mektubu *"}),r.jsx("textarea",{value:u.coverLetter,onChange:e=>x("coverLetter",e.target.value),rows:"6",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"Neden bu pozisyon için uygun olduğunuzu açıklayın...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CV Yükle"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{const s=e.target.files[0];if(s){if(s.size>5242880)return void Y.error("Dosya boyutu 5MB'dan küçük olmalıdır!");if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type))return void Y.error("Sadece PDF, DOC, DOCX formatları kabul edilir!");m(e=>({...e,resume:s})),Y.success("CV başarıyla yüklendi!")}},className:"hidden",id:"resume-upload"}),r.jsx("label",{htmlFor:"resume-upload",className:"cursor-pointer flex flex-col items-center",children:u.resume?r.jsxs(r.Fragment,{children:[r.jsx(B,{className:"w-8 h-8 text-green-600 mb-2"}),r.jsx("p",{className:"text-green-700 font-medium",children:u.resume.name}),r.jsx("p",{className:"text-sm text-gray-500",children:"Değiştirmek için tıklayın"})]}):r.jsxs(r.Fragment,{children:[r.jsx(F,{className:"w-8 h-8 text-gray-400 mb-2"}),r.jsx("p",{className:"text-gray-700",children:"CV Yükle (PDF, DOC, DOCX)"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Maksimum 5MB"})]})})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deneyim (Yıl)"}),r.jsx("input",{type:"text",value:u.experience,onChange:e=>x("experience",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"Örn: 3 yıl"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beklenen Maaş"}),r.jsx("input",{type:"text",value:u.expectedSalary,onChange:e=>x("expectedSalary",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"Örn: 15.000 TRY"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İşe Başlayabilme Tarihi"}),r.jsx("input",{type:"date",value:u.availableFrom,onChange:e=>x("availableFrom",e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivasyon"}),r.jsx("textarea",{value:u.motivation,onChange:e=>x("motivation",e.target.value),rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"Bu şirkette neden çalışmak istiyorsunuz?"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Ek Linkler (İsteğe Bağlı)"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Portfolio/Website"}),r.jsx("input",{type:"url",value:u.portfolio,onChange:e=>x("portfolio",e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"https://portfolio.com"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"LinkedIn"}),r.jsx("input",{type:"url",value:u.linkedIn,onChange:e=>x("linkedIn",e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"https://linkedin.com/in/..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"GitHub"}),r.jsx("input",{type:"url",value:u.github,onChange:e=>x("github",e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",placeholder:"https://github.com/..."})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[r.jsx(Q,{onClick:h,variant:"outline",children:"İptal"}),r.jsxs(Q,{onClick:async()=>{var s;if(n())if(u.coverLetter.trim()){d(!0);try{await new Promise(e=>setTimeout(e,2e3));e.id,l.id,l.email,null==(s=l.user_metadata)||s.full_name,u.coverLetter,u.experience,u.expectedSalary,u.availableFrom,u.motivation,u.portfolio,u.linkedIn,u.github,u.resume,(new Date).toISOString();o(2),Y.success("Başvurunuz başarıyla gönderildi!")}catch(a){Y.error("Başvuru gönderilirken hata oluştu!")}finally{d(!1)}}else Y.error("Başvuru mektubu boş olamaz!");else Y.error("Başvuru yapabilmek için giriş yapmalısınız!")},disabled:c||!u.coverLetter.trim(),className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(D,{className:"w-4 h-4 mr-2"}),c?"Gönderiliyor...":"Başvuru Gönder"]})]})]}):r.jsxs("div",{className:"py-8 text-center space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx(B,{className:"w-8 h-8 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Başvurunuz Alındı!"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:[r.jsx("strong",{children:e.company})," firmasına ",r.jsx("strong",{children:e.title})," pozisyonu için başvurunuz başarıyla gönderildi."]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-2",children:"Sonraki Adımlar:"}),r.jsxs("ul",{className:"space-y-1 text-blue-700",children:[r.jsx("li",{children:"• Başvurunuz şirket tarafından incelenecek"}),r.jsx("li",{children:"• Uygun görülürse e-posta ile iletişime geçilecek"}),r.jsx("li",{children:"• Başvuru durumunuzu profilinizden takip edebilirsiniz"})]})]})]}),r.jsx("div",{className:"flex justify-center gap-3 pt-4",children:r.jsx(Q,{onClick:h,className:"bg-blue-600 hover:bg-blue-700",children:"Tamam"})})]})]})}):null}const $e=t.memo(({index:e,style:s,data:a})=>{const{items:t,userLocation:l,onRowClick:n,isSubscribed:i,onPremiumClick:o,onJobApply:c}=a,d=t[e],u=Ee(l.lat,l.lng,d.location.lat,d.location.lng),m=i||!(u>50);return r.jsxs("div",{style:s,className:`border-b bg-white flex items-center hover:bg-gray-50 transition-colors ${m?"cursor-pointer":"opacity-70"} ${d.isSponsored?"bg-yellow-50":""}`,onClick:()=>m?n(d.location):o(),children:[r.jsx("div",{className:"w-24 px-3 py-3 flex-shrink-0",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white "+("job"===d.type?"bg-ilan":"bg-cv"),children:"job"===d.type?"İLAN":"Aday"}),d.isSponsored&&r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-yellow-800 bg-yellow-200",children:"Sponsorlu"})]})}),r.jsxs("div",{className:"flex-grow px-3 py-3 min-w-0",children:[r.jsx("p",{className:"font-bold text-sm truncate",children:d.title}),r.jsx("p",{className:`text-gray-600 text-xs mt-1 truncate ${!m&&"blur-sm"}`,children:d.company||d.name||"Şirket bilgisi mevcut değil"})]}),r.jsx("div",{className:"w-20 px-3 py-3 text-right flex-shrink-0",children:r.jsxs("span",{className:`text-sm font-medium text-gray-700 ${!m&&"blur-sm"}`,children:[u.toFixed(1)," km"]})}),r.jsx("div",{className:"w-32 px-3 py-3 flex-shrink-0",children:r.jsx("span",{className:"text-xs text-gray-600 truncate block",children:d.address})}),r.jsx("div",{className:"w-32 px-3 py-3 flex-shrink-0",children:r.jsxs("div",{className:"flex gap-1 text-xs",children:["job"===d.type&&!d.isOwner&&m&&r.jsx("button",{onClick:e=>{e.stopPropagation(),c(d)},className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs font-medium",children:"Başvur"}),d.isOwner&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 text-xs",children:"✏️"}),r.jsx("button",{className:"px-2 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200 text-xs",children:"🗑️"})]}),r.jsx("button",{className:"px-2 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 text-xs",children:"⚠️"})]})})]})});const Be=t.memo(function({data:e,onRowClick:s,isSubscribed:a,userLocation:l,onPremiumClick:n}){const[i,o]=t.useState(null),[c,d]=t.useState(!1),u=e=>{o(e),d(!0)};return 0===e.length?r.jsx("div",{className:"flex-grow flex items-center justify-center",children:r.jsx("p",{className:"text-center text-gray-500",children:"Filtrelerinize uygun sonuç bulunamadı."})}):r.jsxs("div",{className:"flex-grow flex flex-col bg-white",children:[r.jsxs("div",{className:"border-b bg-gray-100 flex items-center text-sm font-semibold text-gray-600",children:[r.jsx("div",{className:"w-24 px-3 py-3 flex-shrink-0",children:"Tür"}),r.jsx("div",{className:"flex-grow px-3 py-3 min-w-0",children:"Başlık / Ünvan"}),r.jsx("div",{className:"w-20 px-3 py-3 text-right flex-shrink-0",children:"Uzaklık"}),r.jsx("div",{className:"w-32 px-3 py-3 flex-shrink-0",children:"Konum"}),r.jsx("div",{className:"w-32 px-3 py-3 flex-shrink-0",children:"Aksiyonlar"})]}),r.jsx("div",{className:"flex-grow",children:e.map((t,i)=>r.jsx($e,{index:i,style:{},data:{items:e,userLocation:l,onRowClick:s,isSubscribed:a,onPremiumClick:n,onJobApply:u}},t.id))}),r.jsxs("div",{className:"border-t bg-gray-50 px-4 py-2 text-xs text-gray-600",children:["Toplam ",e.length.toLocaleString()," ilan gösteriliyor"]}),r.jsx(Pe,{job:i,isOpen:c,onClose:()=>{d(!1),o(null)}})]})});function Fe({currentPage:e,totalPages:s,onPageChange:a}){return s<=1?null:r.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[r.jsx("button",{onClick:()=>a(e-1),disabled:1===e,className:"px-3 py-1 rounded-md bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Önceki"}),(()=>{const a=[],t=Math.floor(3.5);if(s<=7)for(let e=1;e<=s;e++)a.push(e);else{a.push(1),e>t+1&&a.push("...");let r=Math.max(2,e-t+(e>s-t?s-e-t+1:0)),l=Math.min(s-1,e+t-(e<=t?e-t:0));for(let e=r;e<=l;e++)a.push(e);e<s-t&&a.push("..."),a.push(s)}return a})().map((s,t)=>"number"==typeof s?r.jsx("button",{onClick:()=>a(s),className:"w-8 h-8 rounded-md "+(e===s?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"),children:s},t):r.jsx("span",{className:"px-2 text-gray-500",children:"..."},t)),r.jsx("button",{onClick:()=>a(e+1),disabled:e===s,className:"px-3 py-1 rounded-md bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})}function De({onAddEntry:e,userLocation:s}){const[a,l]=t.useState("job"),[n,i]=t.useState(""),[o,c]=t.useState(""),[d,u]=t.useState(""),[m,x]=t.useState(""),[h,g]=t.useState(""),[p,b]=t.useState("");return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[r.jsx("button",{onClick:()=>l("job"),className:"p-3 rounded-lg font-semibold "+("job"===a?"bg-ilan text-white":"bg-gray-200"),children:"İş İlanı"}),r.jsx("button",{onClick:()=>l("cv"),className:"p-3 rounded-lg font-semibold "+("cv"===a?"bg-cv text-white":"bg-gray-200"),children:"Özgeçmiş"})]}),r.jsxs("form",{onSubmit:async t=>{t.preventDefault();let r=`${s.lat.toFixed(4)}, ${s.lng.toFixed(4)}`;try{const e=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s.lat}&lon=${s.lng}&zoom=18&addressdetails=1`),a=await e.json();if(a.display_name){const e=a.display_name.split(",").map(e=>e.trim());r=e.length>2?`${e[0]}, ${e[e.length-1]}`:a.display_name.substring(0,50)}}catch(f){}const l={id:`manual-${Date.now()}`,type:a,title:n,description:h,location:{lat:s.lat,lng:s.lng},address:r,source:"manual",postedDate:(new Date).toISOString(),applyUrl:null,contact:p};"job"===a?(l.company=o,l.salary_min=parseInt(d),l.salary_max=parseInt(m),l.salary={min:parseInt(d),max:parseInt(m),currency:"TRY",period:"Aylık"},l.employmentType="Tam zamanlı",l.category="Genel"):l.name=o,e(l),i(""),c(""),u(""),x(""),g(""),b("")},className:"flex-grow flex flex-col",children:[r.jsx("div",{className:"space-y-3",children:"job"===a?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"İlan Başlığı (örn: Yazılım Geliştiricisi)",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),r.jsx("textarea",{placeholder:"Açıklama",value:h,onChange:e=>g(e.target.value),className:"w-full p-2 border rounded-md h-24",required:!0}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"number",placeholder:"Min Maaş",value:d,onChange:e=>u(e.target.value),className:"w-1/2 p-2 border rounded-md",required:!0}),r.jsx("input",{type:"number",placeholder:"Max Maaş",value:m,onChange:e=>x(e.target.value),className:"w-1/2 p-2 border rounded-md",required:!0})]}),r.jsx("input",{type:"text",placeholder:"Şirket Adı",value:o,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),r.jsx("input",{type:"text",placeholder:"İletişim Bilgileri (E-posta veya Telefon)",value:p,onChange:e=>b(e.target.value),className:"w-full p-2 border rounded-md",required:!0})]}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Ad Soyad",value:o,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),r.jsx("input",{type:"text",placeholder:"Ünvan (örn: Proje Yöneticisi)",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),r.jsx("textarea",{placeholder:"Açıklama / Yetenek Özeti",value:h,onChange:e=>g(e.target.value),className:"w-full p-2 border rounded-md h-40",required:!0}),r.jsx("input",{type:"text",placeholder:"İletişim Bilgileri (E-posta veya Telefon)",value:p,onChange:e=>b(e.target.value),className:"w-full p-2 border rounded-md",required:!0})]})}),r.jsx("button",{type:"submit",className:"w-full p-3 rounded-lg font-bold text-white bg-blue-600 hover:bg-blue-700 mt-auto",children:"Ekle"})]})]})}function Ge(){const{isAuthCallback:e}=Le(),{isAuthenticated:s,user:a,loading:l}=ye(),{toasts:n,removeToast:i}=V(),[o,c]=t.useState("map"),[d,u]=t.useState([]),[m,x]=t.useState({type:"all",keyword:""}),[h,g]=t.useState(window.innerWidth<768),[p,b]=t.useState(null),[f,y]=t.useState(1),[v,j]=t.useState(null);t.useEffect(()=>{const e=Ne();return je.events.pageView("modern_app"),e},[]),t.useEffect(()=>{navigator.geolocation.getCurrentPosition(e=>{const s={lat:e.coords.latitude,lng:e.coords.longitude};j(s),je.track("location_acquired",{method:"geolocation",accuracy:e.coords.accuracy})},e=>{j({lat:41.01,lng:28.97}),je.track("location_fallback",{reason:e.message})})},[]),t.useEffect(()=>{const e=()=>{g(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),t.useEffect(()=>{if(!(null==v?void 0:v.lat)||!(null==v?void 0:v.lng))return;(async()=>{var e;const s=we("jobs");try{const a=await fetch("/api/get-jobs?limit=100000&page=1"),t=a.headers.get("content-type");if(!t||!t.includes("application/json")){await a.text();throw new Error("API returned non-JSON response")}const r=await a.json();if(r.success&&(null==(e=r.jobs)?void 0:e.length)>0){const e=r.jobs.map(e=>({id:`modern-${e.id}`,type:"job",title:e.title,company:e.company||"Şirket Belirtilmemiş",name:e.company,location:{lat:parseFloat(e.lat),lng:parseFloat(e.lon)},address:`${e.city||""}, ${e.country||""}`.replace(/^,\s*|,\s*$/g,""),salary_min:e.salary_min,salary_max:e.salary_max,currency:e.currency,applyUrl:"manual"===e.source?null:e.url,contact:"manual"===e.source?e.contact:null,source:e.source||"unknown",postedDate:e.created_at,distance:v?Ee(v.lat,v.lng,parseFloat(e.lat),parseFloat(e.lon)):0})).filter(e=>e.location.lat&&e.location.lng);u(e),s(e.length),je.track("jobs_loaded",{count:e.length,source:"modern_app"})}}catch(a){je.track("data_load_error",{error:a.message})}})()},[v]);const N=d.filter(e=>{var s,a;if("all"!==m.type&&e.type!==m.type)return!1;if(m.keyword){const t=m.keyword.toLowerCase(),r=null==(s=e.title)?void 0:s.toLowerCase().includes(t),l=null==(a=e.company)?void 0:a.toLowerCase().includes(t);if(!r&&!l)return!1}return!0}).sort((e,s)=>e.distance-s.distance),w=N.slice(75*(f-1),75*f),k=Math.ceil(N.length/75),C=e=>{x(e),y(1),je.events.filterUsage("combined",e)},S=e=>{b(e.location),je.events.jobClick(e.id,"list")};return e?r.jsx(Se,{}):l?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Modern Teppek yükleniyor..."})]})}):s()&&"dashboard"===o?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(ke,{}),r.jsxs("div",{className:"pt-4",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 mb-6",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>c("map"),className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors",children:"🗺️ Harita"}),r.jsx("button",{onClick:()=>c("dashboard"),className:"px-4 py-2 rounded-lg bg-blue-600 text-white",children:"📊 Dashboard"})]})}),r.jsx(Ce,{})]})]}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(ke,{}),s()&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>c("map"),className:"px-4 py-2 rounded-lg bg-blue-600 text-white",children:"🗺️ Harita"}),r.jsx("button",{onClick:()=>c("dashboard"),className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 transition-colors",children:"📊 Dashboard"})]})}),h?r.jsxs("div",{className:"h-[calc(100vh-120px)] w-full relative",children:[r.jsx(Oe,{data:N,selectedLocation:p,userLocation:v}),r.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-[1001] bg-white rounded-2xl shadow-lg p-4",children:[r.jsx(Me,{onFilterChange:C,setCurrentPage:y}),r.jsx("div",{className:"mt-4 max-h-48 overflow-y-auto",children:r.jsx(Be,{data:w.slice(0,5),onRowClick:S,userLocation:v})})]})]}):r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex h-[70vh] bg-white mx-4 rounded-lg shadow-sm overflow-hidden",children:[r.jsx("div",{className:"w-[35%] h-full p-4 bg-gray-50 flex flex-col",children:r.jsx(De,{onAddEntry:e=>{u(s=>[{...e,id:`user-${Date.now()}`},...s]),je.track("job_added",{source:"user",type:e.type})},userLocation:v})}),r.jsx("div",{className:"w-[65%] h-full",children:r.jsx(Oe,{data:N,selectedLocation:p,userLocation:v})})]}),r.jsxs("div",{className:"bg-white mx-4 mt-4 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:r.jsx(Me,{onFilterChange:C,setCurrentPage:y})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:N.length})," sonuç bulundu",v&&r.jsx("span",{className:"ml-2",children:"• Konumunuza göre sıralandı"})]}),r.jsx(Be,{data:w,onRowClick:S,userLocation:v}),k>1&&r.jsx("div",{className:"mt-6",children:r.jsx(Fe,{currentPage:f,totalPages:k,onPageChange:y})})]})]})]}),r.jsx(_e,{toasts:n,removeToast:i})]})}G.createRoot(document.getElementById("root")).render(r.jsxs(R.StrictMode,{children:[r.jsx(Ge,{}),r.jsx(W,{}),r.jsx(q,{})]}));
