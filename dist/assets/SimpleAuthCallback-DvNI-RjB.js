import{j as e,s}from"./index-C3BzcrBR.js";import{r as a}from"./vendor-CRKWNzqH.js";import"./supabase-dOUp6-66.js";import"./ui-libs-K9mZ2qrl.js";function t(){const[t,i]=a.useState("İşleniyor...");a.useEffect(()=>{(async()=>{try{const{data:e,error:a}=await s.auth.getSession();if(a)return void i("Giriş başarısız: "+a.message);e.session&&(await r(e.session.user),i("Giriş başarılı! Ana sayfaya yönlendiriliyor..."),setTimeout(()=>{window.history.replaceState({},"","/"),window.dispatchEvent(new CustomEvent("auth-state-changed")),window.location.reload()},1e3))}catch(e){i("Beklenmeyen hata oluştu")}})()},[]);const r=async e=>{var a,t;try{const{data:i}=await s.from("profiles").select("id").eq("id",e.id).single();if(!i){const i=(null==(a=e.user_metadata)?void 0:a.full_name)||(null==(t=e.email)?void 0:t.split("@")[0])||"Kullanıcı";await s.from("profiles").upsert({id:e.id,email:e.email,full_name:i,user_type:"job_seeker"})}}catch(i){}};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/auth/SimpleAuthCallback.jsx",lineNumber:80,columnNumber:9},this),e.jsxDEV("p",{className:"text-gray-600",children:t},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/auth/SimpleAuthCallback.jsx",lineNumber:81,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/seher/Desktop/geoo/src/components/auth/SimpleAuthCallback.jsx",lineNumber:79,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/auth/SimpleAuthCallback.jsx",lineNumber:78,columnNumber:5},this)}export{t as SimpleAuthCallback};
