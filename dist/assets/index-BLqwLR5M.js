var g=Object.defineProperty;var o=(e,t,s)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var i=(e,t,s)=>o(e,typeof t!="symbol"?t+"":t,s);import{r as a}from"./index-DTjiHLmK.js";var l="__vtcr",d=1,b=class{constructor(){i(this,"commands");i(this,"changeHandlers");this.commands=[],this.changeHandlers=new Set}onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}register(e){this.commands.includes(e)||(this.commands.push(e),this.emitChange())}unregister(e){let t=this.commands.indexOf(e);t!==-1&&(this.commands.splice(t,1),this.emitChange())}},c=()=>typeof window<"u"&&(window.top||window),r=()=>{let e=c();if(e){let t=e[l];return t||(t=new b,e[l]=t),t}};r();var u=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let s=e.length;s--;){let n=e[s],h=t[s];if(n!==h)return!1}return!0},_=class{constructor(e){i(this,"key");i(this,"_label");i(this,"_badge");i(this,"_badgeColor");i(this,"_aliases");i(this,"_href");i(this,"onSelect");i(this,"_visible");i(this,"changeHandlers");this.key=`${d++}Ã—${String(Math.random()).substring(2)}`,this._label=e.label,this._badge=e.badge,this._badgeColor=e.badgeColor,this._aliases=e.aliases,this._href=e.href,this.onSelect=e.onSelect,this._visible=e.visible,this.changeHandlers=new Set}get label(){return this._label}set label(e){this._label!==e&&(this._label=e,this.emitChange())}get badge(){return this._badge}set badge(e){this._badge!==e&&(this._badge=e,this.emitChange())}get badgeColor(){return this._badgeColor}set badgeColor(e){this._badgeColor!==e&&(this._badgeColor=e,this.emitChange())}get aliases(){return this._aliases}set aliases(e){u(this._aliases,e)||(this._aliases=e,this.emitChange())}get href(){return this._href}set href(e){this._href!==e&&(this._href=e,this.emitChange())}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.emitChange())}remove(){var e;(e=r())==null||e.unregister(this)}onChange(e){return this.changeHandlers.add(e),()=>this.changeHandlers.delete(e)}emitChange(){for(let e of this.changeHandlers)e()}},m=e=>{var s;let t=new _(e);return(s=r())==null||s.register(t),t},v=e=>{let t=a.useRef();return a.useEffect(()=>{let s=t.current;s?(s.label=e.label,s.badge=e.badge,s.badgeColor=e.badgeColor,s.aliases=e.aliases,s.href=e.href,s.onSelect=e.onSelect,s.visible=e.visible):(s=m(e),t.current=s)}),a.useEffect(()=>()=>{var s;(s=t.current)==null||s.remove(),t.current=void 0},[]),t.current};export{v as useCommand};
