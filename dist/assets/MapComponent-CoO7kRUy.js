import{a as e,j as n}from"./index-BVAxVga0.js";import{r as t}from"./vendor-CRKWNzqH.js";import"./supabase-dOUp6-66.js";import"./ui-libs-K9mZ2qrl.js";const r='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"/>\n  </svg>',o='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>\n  </svg>',s='<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>\n  </svg>';let i;function a({data:a,selectedLocation:l,isSubscribed:c,userLocation:d,onPremiumClick:u}){const{t:p}=e(),v=t.useRef(null),m=t.useRef(null),h=t.useRef(null),f=t.useRef(null),g=t.useRef(null),[y,w]=t.useState(null),x={street:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},satellite:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri"}},C=t.useCallback((e=>{let n;return(...t)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,t),150)}})(e=>{m.current&&y&&m.current.removeLayer(y);const n=i.tileLayer(x[e].url,{attribution:x[e].attribution,noWrap:!0}).addTo(m.current);w(n)}),[y]);t.useEffect(()=>{(async()=>{if(await(async()=>{var e;if("undefined"!=typeof window){if(["https://unpkg.com/leaflet@1.9.4/dist/leaflet.css","https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css","https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"].forEach(e=>{try{if(!document.querySelector(`link[href="${e}"]`)){const n=document.createElement("link");n.rel="stylesheet",n.href=e,document.head&&document.head.appendChild(n)}}catch(n){}}),!window.L)try{await new Promise((e,n)=>{const t=document.createElement("script");t.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",t.onload=e,t.onerror=n,document.head?document.head.appendChild(t):n(new Error("Document head not available"))})}catch(n){return}if(!(null==(e=window.L)?void 0:e.markerClusterGroup))try{await new Promise((e,n)=>{const t=document.createElement("script");t.src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js",t.onload=e,t.onerror=n,document.head?document.head.appendChild(t):n(new Error("Document head not available"))})}catch(n){return}i=window.L,i.markerClusterGroup}})(),v.current&&!m.current&&i&&d){const n=(null==d?void 0:d.lat)||41.01,t=(null==d?void 0:d.lng)||28.97;try{m.current=i.map(v.current,{maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,minZoom:2,maxZoom:18}).setView([n,t],10);const e=i.tileLayer(x.street.url,{attribution:x.street.attribution,noWrap:!0,bounds:[[-90,-180],[90,180]]}).addTo(m.current);w(e),f.current=i.circle([n,t],{radius:5e4,color:"#3b82f6",fillColor:"#60a5fa",fillOpacity:.1,weight:1}).addTo(m.current),m.current&&m.current.fitBounds(f.current.getBounds()),h.current=i.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,spiderfyDistanceMultiplier:3,spiderfyOnEveryZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),m.current.addLayer(h.current),m.current.on("zoomend moveend",()=>{setTimeout(()=>{h.current&&h.current.refreshClusters()},100)});const r=()=>{setTimeout(()=>{m.current&&h.current&&(m.current.invalidateSize(),h.current.refreshClusters(),0===h.current.getLayers().length&&a&&a.length>0&&setTimeout(()=>window.dispatchEvent(new CustomEvent("force-marker-refresh")),200))},150)};return window.addEventListener("resize",r),setTimeout(()=>{m.current&&m.current.invalidateSize()},100),()=>{window.removeEventListener("resize",r)}}catch(e){v.current&&(v.current.innerHTML="")}}})()},[d]),t.useEffect(()=>{if(m.current&&d){const e=i.divIcon({html:'<i class="fa-solid fa-location-pin user-location-icon"></i>',className:"",iconSize:[32,32],iconAnchor:[16,32]});f.current&&f.current.setLatLng([(null==d?void 0:d.lat)||41.01,(null==d?void 0:d.lng)||28.97]),g.current?g.current.setLatLng([(null==d?void 0:d.lat)||41.01,(null==d?void 0:d.lng)||28.97]):g.current=i.marker([(null==d?void 0:d.lat)||41.01,(null==d?void 0:d.lng)||28.97],{icon:e,zIndexOffset:1e3}).addTo(m.current)}},[d]);const[b,k]=t.useState(0);return t.useEffect(()=>{const e=()=>k(e=>e+1);return window.addEventListener("force-marker-refresh",e),()=>window.removeEventListener("force-marker-refresh",e)},[]),t.useEffect(()=>{h.current&&a.length&&d&&(m.current&&(m.current.removeLayer(h.current),h.current=i.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,spiderfyDistanceMultiplier:3,spiderfyOnEveryZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0}),m.current.addLayer(h.current)),a.forEach((e,n)=>{const t="job"===e.type?"fa-briefcase":"fa-user",a="job"===e.type?"#0097A7":"#FB8C00",l=`<div class="marker-container ${e.isSponsored?"sponsored-marker":""}">\n                <div class="icon-wrapper" style="border-color: ${e.isSponsored?"#FBBF24":a};">\n                    ${e.isSponsored?'<i class="fa-solid fa-star absolute -top-2 -right-2 text-yellow-400 text-xl"></i>':""}\n                    <i class="fa-solid ${t}" style="color: ${a};"></i>\n                </div>\n                <div class="marker-label">${e.title}</div>\n            </div>`,c=i.divIcon({html:l,className:"",iconSize:[120,90],iconAnchor:[60,26]}),d=i.marker([e.location.lat,e.location.lng],{icon:c}),p=function(e){return"adzuna"===e.source||e.adzuna_id||e.url&&e.url.includes("adzuna")||e.company&&e.salary_min&&e.salary_max&&e.url?function(e){var n,t,s;const i=e.city||"";return`\n    <div class="custom-popup-container adzuna-popup">\n      <div class="popup-header">\n        <div class="popup-title">${e.title}</div>\n        <div class="popup-source">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>\n  </svg>\n          Adzuna\n        </div>\n      </div>\n      \n      ${e.salary_min&&e.salary_max?`\n        <div class="popup-salary adzuna-salary">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>\n  </svg>\n          ${e.currency||"USD"} ${(null==(n=Math.round(e.salary_min))?void 0:n.toLocaleString())||"?"} - ${(null==(t=Math.round(e.salary_max))?void 0:t.toLocaleString())||"?"}\n        </div>\n      `:""}\n      \n      <div class="popup-details">\n        <div class="popup-company">\n          ${r}\n          ${e.company||"Company information not available"}\n        </div>\n        <div class="popup-location">\n          ${o}\n          ${i}\n        </div>\n      </div>\n\n      ${(null==(s=e.description)?void 0:s.text)?`\n      <div class="popup-description">\n        ${e.description.text.substring(0,150)}...\n      </div>\n      `:""}\n      \n      ${e.url?`\n        <a href="${e.url}" target="_blank" rel="noopener noreferrer" class="popup-apply-btn adzuna-apply">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>\n  </svg>\n          Apply Now\n        </a>\n      `:""}\n      \n      <div class="popup-footer">\n        <small>Powered by Adzuna API</small>\n      </div>\n    </div>\n  `}(e):"cv"===e.type?function(e){var n,t;const r=e.city||"";return`\n    <div class="custom-popup-container cv-popup">\n      <div class="popup-header">\n        <div class="popup-title">${e.title||"Profesyonel Profil"}</div>\n        <div class="popup-source cv-source">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>\n  </svg>\n          Candidate Profile\n        </div>\n      </div>\n      \n      <div class="popup-candidate">\n        <div class="candidate-name">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2M21 9V7L12 1L3 7V9C3 11.66 5.34 14 8 14L11 14V21L12 20L13 21V14L16 14C18.66 14 21 11.66 21 9Z"/>\n  </svg>\n          ${e.name||e.full_name||"Name not specified"}\n        </div>\n      </div>\n      \n      ${e.salary_min&&e.salary_max?`\n        <div class="popup-salary cv-salary">\n          <i class="fa-solid fa-chart-line"></i>\n          Expected: ${e.currency||"TRY"} ${(null==(n=Math.round(e.salary_min))?void 0:n.toLocaleString())||"?"} - ${(null==(t=Math.round(e.salary_max))?void 0:t.toLocaleString())||"?"}\n        </div>\n      `:""}\n      \n      <div class="popup-details">\n        ${e.experience_years?`\n          <div class="popup-experience">\n            <i class="fa-solid fa-calendar-days"></i>\n            ${e.experience_years} years experience\n          </div>\n        `:""}\n        <div class="popup-location">\n          ${o}\n          ${r}\n        </div>\n        ${e.remote?'\n          <div class="popup-remote">\n            <i class="fa-solid fa-wifi"></i>\n            Open to remote work\n          </div>\n        ':""}\n      </div>\n      \n      ${e.skills?`\n        <div class="popup-skills">\n          <div class="skills-label">\n            <i class="fa-solid fa-code"></i>\n            Skills\n          </div>\n          <div class="skills-list">${e.skills.split(",").slice(0,3).join(", ")}${e.skills.split(",").length>3?"...":""}</div>\n        </div>\n      `:""}\n      \n      ${e.contact?`\n        <div class="popup-contact cv-contact">\n          <div class="contact-label">\n            ${s}\n            Contact\n          </div>\n          <div class="contact-info">${e.contact}</div>\n        </div>\n      `:""}\n      \n      <div class="popup-footer">\n        <small>Candidate Profile • Teppek</small>\n      </div>\n    </div>\n  `}(e):function(e){var n,t,i;const a=e.city||"";return`\n    <div class="custom-popup-container manual-job-popup">\n      <div class="popup-header">\n        <div class="popup-title">${e.title}</div>\n        <div class="popup-source manual-source">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>\n  </svg>\n          Manual Listing\n        </div>\n      </div>\n      \n      ${e.salary_min&&e.salary_max?`\n        <div class="popup-salary manual-salary">\n          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n    <path d="M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48L7 10l.85 1.48L9.15 10.7 8.3 9.22 9 8.47l-.85-1.48L6.85 7.75 7.7 6.27 7 5.52l-.85 1.48L4.85 6.25 4 7.73l.85 1.48L3.15 10z"/>\n  </svg>\n          ${e.currency||"TRY"} ${(null==(n=Math.round(e.salary_min))?void 0:n.toLocaleString())||"?"} - ${(null==(t=Math.round(e.salary_max))?void 0:t.toLocaleString())||"?"}\n        </div>\n      `:""}\n      \n      <div class="popup-details">\n        <div class="popup-company">\n          ${r}\n          ${e.company||"Company information not available"}\n        </div>\n        <div class="popup-location">\n          ${o}\n          ${a}\n        </div>\n      </div>\n\n      ${(null==(i=e.description)?void 0:i.text)?`\n      <div class="popup-description">\n        ${e.description.text.substring(0,150)}...\n      </div>\n      `:""}\n      \n      ${e.contact?`\n        <div class="popup-contact manual-contact">\n          <div class="contact-label">\n            ${s}\n            Contact Information\n          </div>\n          <div class="contact-info">${e.contact}</div>\n        </div>\n      `:""}\n      \n      <div class="popup-footer">\n        <small>Local Listing • Teppek</small>\n      </div>\n    </div>\n  `}(e)}(e);window.handlePremiumClick=u,d.bindPopup(p),d.on("click",function(e){this.openPopup()}),h.current.addLayer(d)}))},[a,c,b]),t.useEffect(()=>{l&&m.current&&m.current.setView([l.lat,l.lng],16)},[l]),n.jsxDEV("div",{className:"relative h-full w-full",children:[n.jsxDEV("div",{ref:v,className:"h-full w-full",style:{zIndex:1}},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:331,columnNumber:13},this),n.jsxDEV("div",{className:"absolute bottom-4 left-4 z-[1000] flex flex-col gap-2",children:[n.jsxDEV("button",{onClick:()=>m.current&&d&&m.current.setView([(null==d?void 0:d.lat)||41.01,(null==d?void 0:d.lng)||28.97],14),className:"bg-green-600 text-white font-semibold px-4 py-2 rounded-lg shadow-lg hover:bg-green-700 transition-colors",children:p("buttons.location")},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:334,columnNumber:17},this),n.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg flex",children:[n.jsxDEV("button",{onClick:()=>C("street"),className:"px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-l-lg transition-colors",children:p("map.street")},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:341,columnNumber:22},this),n.jsxDEV("button",{onClick:()=>C("satellite"),className:"px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-r-lg border-l transition-colors",children:p("map.satellite")},void 0,!1,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:342,columnNumber:22},this)]},void 0,!0,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:340,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:333,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/seher/Desktop/geoo/src/components/MapComponent.jsx",lineNumber:330,columnNumber:9},this)}export{a as default};
